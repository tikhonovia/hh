//>>built
define("dojo/touch","./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(D,r,E,F,G,f,n,p,s,d){function k(a,b,c){return t&&c?function(b,a){return f(b,c,a)}:q?function(u,c){var d=f(u,b,function(b){c.call(this,b);l=(new Date).getTime()}),e=f(u,a,function(b){(!l||(new Date).getTime()>l+1E3)&&c.call(this,b)});return{remove:function(){d.remove();e.remove()}}}:function(b,c){return f(b,a,c)}}function H(a){do if(void 0!==a.dojoClick)return a.dojoClick;
while(a=a.parentNode)}function v(a,b,c){if(e=!a.target.disabled&&H(a.target))w=a.target,x=a.changedTouches?a.changedTouches[0].pageX:a.clientX,y=a.changedTouches?a.changedTouches[0].pageY:a.clientY,z=("object"==typeof e?e.x:"number"==typeof e?e:0)||4,A=("object"==typeof e?e.y:"number"==typeof e?e:0)||4,B||(B=!0,d.doc.addEventListener(b,function(b){e=e&&(b.changedTouches?b.changedTouches[0].target:b.target)==w&&Math.abs((b.changedTouches?b.changedTouches[0].pageX:b.clientX)-x)<=z&&Math.abs((b.changedTouches?
b.changedTouches[0].pageY:b.clientY)-y)<=A},!0),d.doc.addEventListener(c,function(b){if(e){C=(new Date).getTime();var a=b.target;"LABEL"===a.tagName&&(a=E.byId(a.getAttribute("for"))||a);var c=b.changedTouches?b.changedTouches[0]:b,d=document.createEvent("MouseEvents");d._dojo_click=!0;d.initMouseEvent("click",!0,!0,b.view,b.detail,c.screenX,c.screenY,c.clientX,c.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);setTimeout(function(){f.emit(a,"click",d)},0)}},!0),a=function(b){d.doc.addEventListener(b,
function(a){!a._dojo_click&&((new Date).getTime()<=C+1E3&&!("INPUT"==a.target.tagName&&F.contains(a.target,"dijitOffScreen")))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==b&&(("INPUT"!=a.target.tagName||"radio"==a.target.type||"checkbox"==a.target.type)&&"TEXTAREA"!=a.target.tagName&&"AUDIO"!=a.target.tagName&&"VIDEO"!=a.target.tagName)&&a.preventDefault())},!0)},a("click"),a("mousedown"),a("mouseup"))}var q=n("touch"),m=5>n("ios"),t=navigator.pointerEnabled||
navigator.msPointerEnabled,g=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=!navigator.pointerEnabled?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),B,e,w,x,y,z,A,C,l,h;q&&(t?s(function(){d.doc.addEventListener(g.down,function(a){v(a,g.move,g.up)},!0)}):s(function(){function a(b){var a=G.delegate(b,{bubbles:!0});6<=n("ios")&&(a.touches=b.touches,a.altKey=b.altKey,a.changedTouches=b.changedTouches,a.ctrlKey=b.ctrlKey,a.metaKey=b.metaKey,a.shiftKey=
b.shiftKey,a.targetTouches=b.targetTouches);return a}h=d.body();d.doc.addEventListener("touchstart",function(b){l=(new Date).getTime();var a=h;h=b.target;f.emit(a,"dojotouchout",{relatedTarget:h,bubbles:!0});f.emit(h,"dojotouchover",{relatedTarget:a,bubbles:!0});v(b,"touchmove","touchend")},!0);f(d.doc,"touchmove",function(b){l=(new Date).getTime();var c=d.doc.elementFromPoint(b.pageX-(m?0:d.global.pageXOffset),b.pageY-(m?0:d.global.pageYOffset));c&&(h!==c&&(f.emit(h,"dojotouchout",{relatedTarget:c,
bubbles:!0}),f.emit(c,"dojotouchover",{relatedTarget:h,bubbles:!0}),h=c),f.emit(c,"dojotouchmove",a(b))||b.preventDefault())});f(d.doc,"touchend",function(b){l=(new Date).getTime();var c=d.doc.elementFromPoint(b.pageX-(m?0:d.global.pageXOffset),b.pageY-(m?0:d.global.pageYOffset))||d.body();f.emit(c,"dojotouchend",a(b))})}));r={press:k("mousedown","touchstart",g.down),move:k("mousemove","dojotouchmove",g.move),release:k("mouseup","dojotouchend",g.up),cancel:k(p.leave,"touchcancel",q?g.cancel:null),
over:k("mouseover","dojotouchover",g.over),out:k("mouseout","dojotouchout",g.out),enter:p._eventHandler(k("mouseover","dojotouchover",g.over)),leave:p._eventHandler(k("mouseout","dojotouchout",g.out))};return D.touch=r});
//# sourceMappingURL=touch.js.map